<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>APIs</title>
  <link rel="stylesheet" href="../base.css">
</head>
<style>
   *{
   box-sizing: border-box;
   margin: 0;
   padding: 0;
 }
 body{
   background-color:rgba(36,52,71);
   color: #fff;
   height: 100vh;
   display: grid;
   place-content: center;
   font-size: 1rem;
   padding: 4rem;
 }
 img{
   border-radius: 50px;
   height: 2rem;
   width: 2rem;
 }
</style>
<body>
    <img class="userimg" src="" alt="" />
  <p class="user"></p>
  <script>

/**const endpoint ='https://api.github.com/users/wesbos';
const wesPromise = fetch(endpoint)
console.log(wesPromise)
wesPromise.then(data => {
  console.log(data);
  }).catch(handleError)
***/
/**const endpoint ='https://api.github.com/users/wesbos';
const userEl = document.querySelector('.user')

const wesPromise = fetch(endpoint)
wesPromise.then(response => {
  return response.json()
}).then(data => {
  console.log(data)
  console.log(data.blog)
  console.log(data.name)
  console.log(data.location)
}).catch(handleError)
 **/
 /**const handleError = (err) => {
  console.log('Oh no!')
  console.log('Oh no')
}
const endpoint ='https://api.github.com/users/wesbos';
const userEl = document.querySelector('.user')
userEl.textContent = 'loading...'
const wesPromise = fetch(endpoint)
wesPromise.then(response => {
  return response.json()
}).then(data => {
  console.log(data)
  console.log(data.blog)
  console.log(data.name)
  console.log(data.location)
  userEl.textContent = `${data.name}-${data.blog}`;
}).catch(handleError)
  **/
 
 
  const baseEndpoint ='https://api.github.com';
  const usersEndpoint = `${baseEndpoint}/users`
  
const userEl = document.querySelector('.user')
const userImg = document.querySelector('.userimg')


async function displayUser(username){
  userEl.textContent = 'loading...'
const response = await fetch(`${usersEndpoint}/${username}`)
const data = await response.json();
  console.log(data)
  console.log(data.bio)
  console.log(data.name)
  console.log(data.location)
  userEl.textContent =  `username: ${data.name}  location: ${data.location}`;
  userImg.src = `${data.avatar_url}`
  if(data.message === 'Not found'){
    userEl.textContent = `username:${username} does not exist`;
    userImg.remove()
  }
}

const handleError = (err) => {
  console.log('Oh no!')
  console.log('Oh no')
  userEl.textContent = `Something went wrong: ${err}`
}
  displayUser('wesbos').catch(handleError)
  
  </script>
</body>

</html>
